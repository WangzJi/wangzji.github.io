---
layout: default
---

<div class="post-page">
    <!-- Navigation -->
    <nav class="post-nav glass-nav">
        <div class="nav-container">
            <a href="{{ '/' | relative_url }}" class="nav-logo">
                <span class="logo-text">Eric Wang</span>
            </a>
            <div class="nav-links">
                <a href="{{ '/' | relative_url }}">Home</a>
                <a href="{{ '/blog.html' | relative_url }}" class="active">Blog</a>
                <a href="{{ '/#projects' | relative_url }}">Projects</a>
                <a href="{{ '/#contact' | relative_url }}">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Article Header -->
    <header class="post-header">
        <div class="post-header-content">
            <a href="{{ '/blog.html' | relative_url }}" class="back-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                返回博客列表
            </a>
            
            <div class="post-meta-top">
                <span class="post-category">{{ page.category | default: 'Tech' }}</span>
                <span class="post-date">{{ page.date | date: "%Y年%m月%d日" }}</span>
                <span class="post-read-time">{{ page.read_time | default: '10 min read' }}</span>
            </div>
            
            <h1 class="post-title">{{ page.title }}</h1>
            
            {% if page.excerpt %}
            <p class="post-excerpt">{{ page.excerpt | strip_html }}</p>
            {% endif %}
            
            {% if page.tags %}
            <div class="post-tags">
                {% for tag in page.tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </header>

    <!-- Article Content -->
    <main class="post-main">
        <article class="post-content glass-card">
            {{ content }}
        </article>
        
        <!-- Table of Contents (Auto-generated) -->
        <aside class="post-sidebar">
            <div class="toc-container glass-card">
                <h3>目录</h3>
                <nav class="toc" id="toc">
                    <!-- TOC will be generated by JS -->
                </nav>
            </div>
        </aside>
    </main>

    <!-- Related Posts -->
    <section class="related-posts">
        <div class="section-container">
            <h2 class="section-heading">相关文章</h2>
            <div class="related-grid">
                {% assign related = site.posts | where_exp: "post", "post.url != page.url" | slice: 0, 3 %}
                {% for post in related %}
                <a href="{{ post.url | relative_url }}" class="related-card glass-card">
                    <span class="related-category">{{ post.category | default: 'Tech' }}</span>
                    <h3>{{ post.title }}</h3>
                    <p>{{ post.excerpt | strip_html | truncate: 80 }}</p>
                    <span class="related-date">{{ post.date | date: "%Y-%m-%d" }}</span>
                </a>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="post-footer">
        <div class="footer-content">
            <p>&copy; {{ site.time | date: "%Y" }} {{ site.author }}. All rights reserved.</p>
        </div>
    </footer>
</div>

<script>
// Generate Table of Contents
document.addEventListener('DOMContentLoaded', function() {
    const content = document.querySelector('.post-content');
    const toc = document.getElementById('toc');
    const headings = content.querySelectorAll('h2, h3');
    
    if (headings.length > 0 && toc) {
        const tocList = document.createElement('ul');
        
        headings.forEach((heading, index) => {
            // Add ID to heading if not present
            if (!heading.id) {
                heading.id = 'heading-' + index;
            }
            
            const li = document.createElement('li');
            li.className = heading.tagName.toLowerCase();
            
            const a = document.createElement('a');
            a.href = '#' + heading.id;
            a.textContent = heading.textContent;
            
            li.appendChild(a);
            tocList.appendChild(li);
        });
        
        toc.appendChild(tocList);
    }
    
    // Re-render Mermaid diagrams
    if (typeof mermaid !== 'undefined') {
        mermaid.init(undefined, '.mermaid');
    }
});
</script>
